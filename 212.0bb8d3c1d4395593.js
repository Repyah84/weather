"use strict";(self.webpackChunkweather=self.webpackChunkweather||[]).push([[212],{6212:(q,d,i)=>{i.r(d),i.d(d,{CityWeatherPageModule:()=>X});var c=i(6814),g=i(7913),t=i(9291);let y=(()=>{var e;class n{constructor(a,o){this._locale=a,this._defaultOptions=o}transform(a,o){return(0,c.p6)(a,o,this._locale,this._defaultOptions?.timezone??void 0)}}return(e=n).\u0275fac=function(a){return new(a||e)(t.LFG(t.soG),t.LFG(c.Kl,8))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})(),l=(()=>{var e;class n{constructor(a){this._date=a,this.transformMap=new Map}transform(a){return a.forEach(o=>{const s=this._date.transform(o.dt_txt,"EEEE");let p=this.transformMap.get(s);void 0===p&&(p={day:s,forecastOnDay:[]}),p.forecastOnDay.push(o),this.transformMap.set(s,p)}),Array.from(this.transformMap).map(([o,s])=>s)}getTransformItem(a){return this.transformMap.get(a)}}return(e=n).\u0275fac=function(a){return new(a||e)(t.LFG(y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),n})();var u=i(9468),m=i(2637),C=i(7654),_=i(6671),v=i(5069);function w(e,n){if(1&e&&(t.TgZ(0,"div",6),t._UZ(1,"img",7),t.ALo(2,"weatherIcon"),t.TgZ(3,"span",8),t._uU(4),t.qZA()()),2&e){const r=n.$implicit;t.xp6(1),t.Q6J("src",t.xi3(2,2,r.icon,2),t.LSH),t.xp6(3),t.Oqu(r.description)}}function x(e,n){if(1&e&&(t.TgZ(0,"div",9)(1,"app-weather-description-item",10),t._uU(2," Feels like "),t.qZA(),t.TgZ(3,"app-weather-description-item",10),t._uU(4," Temp min "),t.qZA(),t.TgZ(5,"app-weather-description-item",10),t._uU(6," Temp max "),t.qZA(),t.TgZ(7,"app-weather-description-item",10),t._uU(8," Pressure "),t.qZA(),t.TgZ(9,"app-weather-description-item",10),t._uU(10," humidity "),t.qZA(),t.TgZ(11,"app-weather-description-item",10),t._uU(12," Wind "),t.qZA()()),2&e){const r=n.ngIf,a=t.oxw();t.xp6(1),t.Q6J("value",r.feels_like),t.xp6(2),t.Q6J("value",r.temp_min),t.xp6(2),t.Q6J("value",r.temp_max),t.xp6(2),t.Q6J("value",r.pressure),t.xp6(2),t.Q6J("value",r.humidity),t.xp6(2),t.MGl("value","",a.weatherDetails.wind.speed,"m/s")}}let F=(()=>{var e;class n{}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-city-weather-details"]],inputs:{weatherDetails:"weatherDetails"},decls:10,vars:7,consts:[[1,"header"],[1,"title-date"],[1,"weather"],["class","weather-box",4,"ngFor","ngForOf"],[1,"weather-temp"],["class","main",4,"ngIf"],[1,"weather-box"],["alt","weather",1,"image",3,"src"],[1,"weather-description"],[1,"main"],[1,"weather-item",3,"value"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.ALo(3,"date"),t.qZA()(),t.TgZ(4,"div",2),t.YNc(5,w,5,5,"div",3),t.qZA(),t.TgZ(6,"div")(7,"span",4),t._uU(8),t.qZA()(),t.YNc(9,x,13,6,"div",5)),2&a&&(t.xp6(2),t.Oqu(t.xi3(3,4,o.weatherDetails.dt_txt,"shortTime")),t.xp6(3),t.Q6J("ngForOf",o.weatherDetails.weather),t.xp6(3),t.hij("",o.weatherDetails.main.temp," C"),t.xp6(1),t.Q6J("ngIf",o.weatherDetails.main))},dependencies:[c.sg,c.O5,_.f,c.uU,v.S],styles:["[_nghost-%COMP%]{padding:10px 15px;min-width:150px;display:flex;flex-direction:column;row-gap:20px;align-items:center;border-radius:10px;box-shadow:2px 2px 4px 2px var(--city-weather-color-secondary);background-color:#fff}.title-date[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.weather[_ngcontent-%COMP%]{display:flex;justify-content:center;column-gap:10px}.weather-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.image[_ngcontent-%COMP%]{display:block;object-fit:cover;width:50px;height:50px}.weather-description[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.weather-temp[_ngcontent-%COMP%]{font-size:30px;font-weight:700}.main[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;row-gap:10px}.weather-item[_ngcontent-%COMP%]{justify-content:space-between;column-gap:10px;font-size:12px}"],changeDetection:0}),n})();var O=i(7185);let P=(()=>{var e;class n{constructor(a){this._forecastTransform=a}transform(a){const o=this._forecastTransform.getTransformItem(a);return void 0===o?null:o.forecastOnDay[0].dt_txt}}return(e=n).\u0275fac=function(a){return new(a||e)(t.Y36(l,16))},e.\u0275pipe=t.Yjl({name:"getDateByDay",type:e,pure:!0}),n})();function M(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){const s=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.selectDay=s.day)}),t.TgZ(1,"span",4),t._uU(2),t.qZA()()}if(2&e){const r=n.$implicit,a=t.oxw();t.ekj("btn-day--active",r.day===a.selectDay),t.xp6(2),t.hij(" ",r.day," ")}}function T(e,n){1&e&&t._UZ(0,"app-city-weather-details",13),2&e&&t.Q6J("weatherDetails",n.$implicit)}function W(e,n){if(1&e&&(t.ynx(0),t.YNc(1,T,1,1,"app-city-weather-details",12),t.BQk()),2&e){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",r.forecastOnDay)}}function Z(e,n){if(1&e&&(t.TgZ(0,"div",10),t.YNc(1,W,2,1,"ng-container",11),t.qZA()),2&e){const r=n.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",r.day===a.selectDay)}}let b=(()=>{var e;class n{constructor(){this.storeCityChange=new t.vpe}ngOnInit(){this.selectDay=this.forecast[0].day}onToggleCity(){this.storeCityChange.emit()}}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-city-weather-forecast"]],inputs:{cityCoord:"cityCoord",forecast:"forecast"},outputs:{storeCityChange:"storeCityChange"},decls:14,vars:15,consts:[[1,"header"],[1,"header-action"],["class","__weather-button__ btn-day",3,"btn-day--active","click",4,"ngFor","ngForOf"],[1,"__weather-button__","btn-add-favorite",3,"title","click"],[1,"__weather-button__content__"],[1,"main"],[1,"main-action"],[1,"main-title"],["class","weather-details",4,"ngFor","ngForOf"],[1,"__weather-button__","btn-day",3,"click"],[1,"weather-details"],[4,"ngIf"],[3,"weatherDetails",4,"ngFor","ngForOf"],[3,"weatherDetails"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,M,3,3,"button",2),t.qZA(),t.TgZ(3,"button",3),t.NdJ("click",function(){return o.onToggleCity()}),t.ALo(4,"storeHasWeatherCity"),t.ALo(5,"storeHasWeatherCity"),t._UZ(6,"app-svg-push-pin",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"span",7),t._uU(10),t.ALo(11,"date"),t.ALo(12,"getDateByDay"),t.qZA()(),t.YNc(13,Z,2,1,"div",8),t.qZA()),2&a&&(t.xp6(2),t.Q6J("ngForOf",o.forecast),t.xp6(1),t.ekj("btn-add-favorite--active",t.lcZ(4,6,o.cityCoord)),t.Q6J("title",t.lcZ(5,8,o.cityCoord)?"Delete city from favorite list":"Add city to favorite list"),t.xp6(7),t.Oqu(t.xi3(11,10,t.lcZ(12,13,o.selectDay),"EEEE MMMM d OOO")),t.xp6(3),t.Q6J("ngForOf",o.forecast))},dependencies:[c.sg,c.O5,C.g,F,c.uU,O.k,P],styles:[".__weather-button__[_ngcontent-%COMP%]{flex-shrink:0;cursor:pointer;transform:translateY(-2px);box-shadow:2px 2px 0 0 var(--city-weather-color-secondary);transition:box-shadow .15s,transform .15s;background-color:var(--city-weather-color-gentle);transition:color .15s}.btn-day--active[_ngcontent-%COMP%], .btn-add-favorite--active[_ngcontent-%COMP%]{box-shadow:0 0 0 0 var(--city-weather-color-secondary);transform:translateY(0)}.__weather-button__content__[_ngcontent-%COMP%]{opacity:.8}.__weather-button__[_ngcontent-%COMP%]:focus   .__weather-button__content__[_ngcontent-%COMP%]{opacity:1}.__weather-button__[_ngcontent-%COMP%]:hover   .__weather-button__content__[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;row-gap:20px}.header[_ngcontent-%COMP%]{display:flex;column-gap:20px;justify-content:space-between;align-items:center;overflow:auto}.header-action[_ngcontent-%COMP%]{padding:10px 0;display:flex;column-gap:15px}.main[_ngcontent-%COMP%]{flex:1;border-radius:10px;box-shadow:0 0 0 2px var(--city-weather-color-secondary);background-color:#e9eefa}.main-action[_ngcontent-%COMP%]{grid-area:1/1/2/2}.btn-day[_ngcontent-%COMP%]{padding:10px 20px;border-radius:10px;font-weight:700;color:var(--city-weather-color-active)}.btn-add-favorite[_ngcontent-%COMP%]{margin-right:2px;padding:10px;border-radius:5px;width:50px;height:50px;color:#a9a9a9}.main[_ngcontent-%COMP%]{display:grid;padding:15px;grid-template-columns:1fr;grid-template-rows:auto 1fr;gap:20px}.main-title[_ngcontent-%COMP%]{font-size:calc(2vw * var(--of-set));font-weight:700;color:var(--city-weather-color-primary)}.weather-details[_ngcontent-%COMP%]{grid-area:2/1/3/2;display:flex;flex-wrap:wrap;align-items:flex-start;gap:20px}.btn-day--active[_ngcontent-%COMP%]   .__weather-button__content__[_ngcontent-%COMP%]{opacity:1}.btn-add-favorite--active[_ngcontent-%COMP%]{color:var(--city-weather-color-active)}"],changeDetection:0}),n})();function D(e,n){if(1&e&&(t.TgZ(0,"div",9)(1,"span"),t._uU(2),t.qZA()()),2&e){const r=n.ngIf,a=t.oxw();t.xp6(2),t.lnq(" ",a.weather.geocoding.name," ",a.weather.geocoding.state," ",r.country," ")}}let A=(()=>{var e;class n{}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-city-weather-header"]],inputs:{weather:"weather"},decls:14,vars:10,consts:[["class","header-title",4,"ngIf"],[1,"popularity"],[1,"sun"],[1,"sun-rise-box"],[1,"sun-rise"],[1,"sun-rise-description"],[1,"sun-set-box"],[1,"sun-set"],[1,"sun-set-description"],[1,"header-title"]],template:function(a,o){1&a&&(t.YNc(0,D,3,3,"div",0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3),t._UZ(5,"div",4),t.TgZ(6,"span",5),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"div",6),t._UZ(10,"div",7),t.TgZ(11,"span",8),t._uU(12),t.ALo(13,"date"),t.qZA()()()),2&a&&(t.Q6J("ngIf",o.weather.geocoding),t.xp6(2),t.hij(" Popularity: ",o.weather.weatherForecast.city.population,"\n"),t.xp6(5),t.hij(" Sun Rise ",t.xi3(8,4,o.weather.weatherForecast.city.sunrise,"h:mm a")," "),t.xp6(5),t.hij(" Sun Set ",t.xi3(13,7,o.weather.weatherForecast.city.sunset,"h:mm a")," "))},dependencies:[c.O5,c.uU],styles:[".sun-set-box[_ngcontent-%COMP%], .sun-rise-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;row-gap:10px}.sun-set-description[_ngcontent-%COMP%], .sun-rise-description[_ngcontent-%COMP%]{font-size:calc(2vw * var(--of-set));font-weight:700;color:var(--city-weather-color-primary)}.sun-set[_ngcontent-%COMP%], .sun-rise[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%}[_nghost-%COMP%]{padding:10px;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(#ffffff 40%,#e9eefa);border-radius:10px}.sun[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.header-title[_ngcontent-%COMP%]{font-size:calc(2.5vw * var(--of-set));font-weight:700}.sun-rise[_ngcontent-%COMP%]{background-color:#ffde17;box-shadow:0 0 10px 4px #f8d408}.sun-set[_ngcontent-%COMP%]{background-color:#ffae17;box-shadow:0 0 10px 4px #ffae17}"],changeDetection:0}),n})(),S=(()=>{var e;class n{constructor(a){this._forecastTransform=a}transform(a){return this._forecastTransform.transform(a)}}return(e=n).\u0275fac=function(a){return new(a||e)(t.Y36(l,16))},e.\u0275pipe=t.Yjl({name:"weatherForecastTransform",type:e,pure:!0}),n})(),U=(()=>{var e;class n{constructor(a,o){this._weatherStore=a,this._snackbar=o}ngOnInit(){this.initCityCoord()}inStoreCityChange(){const a=this._weatherStore.toggleCoord((0,g.F)(this.coord));this.initCityCoord(),this._snackbar.setMessage(`City was ${1===a?"add to":"delete from"} favorite list`)}initCityCoord(){const{lat:a,lon:o}=this.weatherForecast.geocoding;this.coord={lat:a,lon:o}}}return(e=n).\u0275fac=function(a){return new(a||e)(t.Y36(u._),t.Y36(m.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-city-weather-page"]],inputs:{weatherForecast:"weatherForecast"},features:[t._Bn([l])],decls:3,vars:5,consts:[[3,"weather"],[3,"cityCoord","forecast","storeCityChange"]],template:function(a,o){1&a&&(t._UZ(0,"app-city-weather-header",0),t.TgZ(1,"app-city-weather-forecast",1),t.NdJ("storeCityChange",function(){return o.inStoreCityChange()}),t.ALo(2,"weatherForecastTransform"),t.qZA()),2&a&&(t.Q6J("weather",o.weatherForecast),t.xp6(1),t.Q6J("cityCoord",o.coord)("forecast",t.lcZ(2,3,o.weatherForecast.weatherForecast.list)))},dependencies:[b,A,S],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:20px;flex:1}"],changeDetection:0}),n})();var J=i(4670),Y=i(7878),I=i(9315),L=i(7398),Q=i(1372),j=i(8036),f=i(9862),k=i(1527),z=i(5608);let E=(()=>{var e;class n{constructor(a){this._http=a}gerCityWeatherForecast({lat:a,lon:o}){const s=(new f.LE).appendAll({appid:k.$,lat:a,lon:o,units:"metric"});return this._http.get(`${z.v}/data/2.5/forecast`,{params:s})}}return(e=n).\u0275fac=function(a){return new(a||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var G=i(6798);let N=(()=>{var e;class n{constructor(a,o){this._weatherForecast=a,this._dataCache=o}getCityWeatherForecastCache(a){return this._dataCache.getCachedData({key:(0,Q.X)("CITY_WEATHER_FORECAST",a),cachingObservable:()=>this._weatherForecast.gerCityWeatherForecast(a),cacheTime:j.o})}}return(e=n).\u0275fac=function(a){return new(a||e)(t.LFG(E),t.LFG(G.w))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var H=i(2539);let $=(()=>{var e;class n{constructor(a,o){this._weatherForecast=a,this._geocoding=o}getCityWeatherForecast(a){return(0,I.D)({geocoding:this._geocoding.getCityGeocodingReverseCache(a).pipe((0,L.U)(([o])=>o)),weatherForecast:this._weatherForecast.getCityWeatherForecastCache(a)})}}return(e=n).\u0275fac=function(a){return new(a||e)(t.LFG(N),t.LFG(H.q))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var h=i(763);const R=[{path:"",component:U,resolve:{weatherForecast:e=>{const n=(0,t.f3M)($),r=e.paramMap.get("coord");if(null===r)throw new Error("Weather forecast resolve error");return n.getCityWeatherForecast((0,Y.N)(r))}}}];let X=(()=>{var e;class n{}return(e=n).\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,J.Bz.forChild(R),c.ez,h.YH,h.JJ,h.k,h.f$]}),n})()}}]);